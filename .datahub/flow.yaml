meta:
  dataset: historical-income-households-us
  findability: unlisted
  owner: anuveyatsu
  ownerid: 90998f7f90e086bd5fc7c9075dfda43b
  version: 1
inputs:
- kind: datapackage
  url: https://raw.githubusercontent.com/anuveyatsu/historical-income-households-us/master/datapackage.json
  parameters:
    resource-mapping: {}
    descriptor:
      name: historical-income-households-us
      title: Income Limits for Each Fifth and Top 5 Percent of All Households:  1967 to 2016
      description: Households as of March of the following year. Income in current and 2016 CPI-U-RS adjusted dollars.
      sources:
        -
          path: https://www2.census.gov
          title: United States Census Bureau
      resources:
        -
          name: historical-income-households-us
          pathType: remote
          path: https://www2.census.gov/programs-surveys/cps/tables/time-series/historical-income-households/h01ar.xls
          format: xls
processing:
  -
    input: historical-income-households-us
    tabulator:
      sheet: 1
      skip_rows: [1,2,3,4,5,6,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112]
      headers:
        - Year
        - Number (thousands)
        - Lowest
        - Second
        - Third
        - Fourth
        - Top 5 percent
    output: current-dollars
    dpp:
      - run: find_replace
        parameters:
          resources: historical-income-households-us
          fields:
            -
              name: Year
              patterns:
                -
                  find: (\(\d+\))
                  replace: ''
  -
    input: historical-income-households-us
    tabulator:
      sheet: 1
      skip_rows: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,112]
      headers:
        - Year
        - Number (thousands)
        - Lowest
        - Second
        - Third
        - Fourth
        - Top 5 percent
    output: 2016-dollars
    dpp:
      - run: find_replace
        parameters:
          resources: historical-income-households-us
          fields:
            -
              name: Year
              patterns:
                -
                  find: (\(\d+\))
                  replace: ''
